<!DOCTYPE html>
<html>
<head>
    <title>Character View</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link rel="stylesheet" href="../static/style/style.css">
</head>
<body class="dark-mode">
<body>
    <div class="container-fluid h-100">

        <p id="dark_p" onclick=toggle() class="text-danger text-right mt-5 mb-1 small">Dark Mode</p>
        <div class="mt-0 form-group text-right">
            <div class="custom-control switch" id="switchDiv">
                <p id="switch"></p>
            </div>
        </div>

        <div class="text-center">
            <h1 class="text-danger my-4">Character List:</h1>
        </div>

        <div>
            <a href="/admin_character_clear" class="d-flex justify-content-center btn btn-link text-center text-warning small"> - Delete All - </a>
        </div>

        <table class="table table-striped table-bordered dark-mode mt-2">
            <thead>
                <tr>
                    <th>ID:</th>
                    <th>Username:</th>
                    <th>Role:</th>
                    <th>Relationship:</th>
                    <th>Potential Motive:</th>
                    <th>Alterations</th>
                    <!-- <th>Time Created:</th>
                    <th>Last Updated:</th> -->
                </tr>
            </thead>
            
            <tbody>
                {% for character in character %}
                    <tr>
                        <td>{{character.idcharacters}}</td>
                        <td>{{character.login_username}}</td>
                        <td>{{character.role}}</td>
                        <td>{{character.relationship}}</td>
                        <td>{{character.potential_motive}}</td>
                        <th class="d-flex justify-content-around">
                            <a href="/admin_character_edit/{{character.idcharacters}}"><button class="btn btn-success">Edit</button></a>
                            <a href="/admin_character_delete/{{character.idcharacters}}"><button class="btn btn-danger">Remove</button></a>
                        </th>
                        <!-- <td>{{character.created_at}}</td>
                        <td>{{character.updated_at}}</td> -->
                    </tr>
                {% endfor %}
                
            </tbody>

        </table>
        <div class="text-center">
            <a href="/admin_character"><button class="btn btn-secondary">+ Add Characters</button></a>
        </div>
    </div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js" integrity="sha512-RPX4FK8D7gh9zv6S1+E2EzR19zZi2aTlTlA7EAE/QOVVK0i7WpXvSDsUIHtbAvlyYf1UDZbTjTmNgidE7nCmFg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
    let switchBtn = document.querySelector("#switch");
        const body = document.querySelector("body");
        const html = document.querySelector("html");

        switchBtn.addEventListener("change", (event) => {
            if(event.target.checked){
                body.classList.remove("light-mode");
                body.classList.add("dark-mode");
                html.classList.add("dark-mode");
            } else {
                body.classList.remove("dark-mode");
                body.classList.add("light-mode");
                html.classList.remove("dark-mode");
            }
        });

        function toggle(){

            let switchToggle

            document.getElementById("switchDiv").innerHTML.length <= 65 ? 
                switchToggle = true : 
                switchToggle = false

            if(switchToggle){

                if(body.classList.contains("light-mode")){
                    body.classList.remove("light-mode");
                    body.classList.add("dark-mode");
                    html.classList.add("dark-mode");
                }
                    
                document.getElementById("switchDiv").innerHTML = 
                `
                    <input type="checkbox" class="custom-control-input switch" id="switch" name="switch" checked/>
                    <label class="form control custom-control-label text-danger" for="switch"></label>
                `
            } else {
                document.getElementById("switchDiv").innerHTML = `<p id="switch"></p>`
            }

            switchBtn = document.querySelector("#switch");

            switchBtn.addEventListener("change", (event) => {
                if(event.target.checked){
                    body.classList.remove("light-mode");
                    body.classList.add("dark-mode");
                    html.classList.add("dark-mode");
                } else {
                    body.classList.remove("dark-mode");
                    body.classList.add("light-mode");
                    html.classList.remove("dark-mode");
                }
            });
        }

</script>
</body>
</html>
